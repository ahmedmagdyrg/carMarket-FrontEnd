<h1>{{ isEdit ? 'Edit Car' : 'Add a new Car' }}</h1>

<form [formGroup]="form" (ngSubmit)="save()" novalidate class="form">
  <!-- Make -->
  <div class="row">
    <label>Make</label>
    <input formControlName="make" placeholder="e.g., Toyota" />
    <small *ngIf="submitted && form.controls['make'].invalid">Required</small>
  </div>

  <!-- Model -->
  <div class="row">
    <label>Model</label>
    <input formControlName="model" placeholder="e.g., Corolla" />
    <small *ngIf="submitted && form.controls['model'].invalid">Required</small>
  </div>

  <!-- Year -->
  <div class="row">
    <label>Year</label>
    <input type="number" formControlName="year" [max]="maxYear" />
    <small *ngIf="submitted && form.controls['year'].invalid">
      Year must be between 1980 and {{ maxYear }}
    </small>
  </div>

  <!-- Price -->
  <div class="row">
    <label>Price (USD)</label>
    <input type="number" formControlName="price" />
    <small *ngIf="submitted && form.controls['price'].invalid">Must be ≥ 0</small>
  </div>

  <!-- Mileage -->
  <div class="row">
    <label>Mileage (km)</label>
    <input type="number" formControlName="mileage" />
    <small *ngIf="submitted && form.controls['mileage'].invalid">Must be ≥ 0</small>
  </div>

  <!-- Condition -->
  <div class="row">
    <label>Condition</label>
    <select formControlName="condition">
      <option>New</option>
      <option>Used</option>
      <option>Certified</option>
    </select>
  </div>

  <!-- Features -->
  <div class="row">
    <label>Features</label>
    <input
      formControlName="features"
      placeholder="Comma separated (e.g., Sunroof, Leather Seats)"
    />
  </div>

  <!-- Description -->
  <div class="row">
    <label>Description</label>
    <textarea formControlName="description" rows="4"></textarea>
  </div>

  <!-- Contact Method -->
  <div class="row">
    <label>Contact Method</label>
    <input formControlName="contactMethod" placeholder="e.g., Phone, Email, WhatsApp" />
    <small *ngIf="submitted && form.controls['contactMethod'].invalid">Required</small>
  </div>

  <!-- Images Upload -->
  <div class="row" *ngIf="!isEdit">
    <label>Upload Car Images</label>
    <input type="file" (change)="onFileSelected($event)" multiple />
  </div>

  <!-- Actions -->
  <div class="actions">
    <button type="submit" class="btn btn-primary">{{ isEdit ? 'Update Listing' : 'Save Listing' }}</button>
    <a routerLink="/" class="btn btn-light">Cancel</a>
  </div>
</form>
